<!DOCTYPE html>
<html lang="en">
<head>
  <!-- ===== META & SEO ===== -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <title>Zenith Roofing Services – San Diego & Temecula Roof Experts</title>
  <meta name="description" content="Licensed roofing contractor ... tile, shingles, TPO, torch down, silicone coatings & gutters.">

  <!-- ===== Preload critical CSS ===== -->
  <link rel="preload" href="/css/base.css" as="style">
  <link rel="preload" href="/css/header.css" as="style">
  <link rel="preload" href="/css/hero.css" as="style">

  <!-- LCP image preload (WebP, responsive) -->
  <link rel="preload" as="image" type="image/webp"
        href="/images/modern-tile-roof-1280.webp"
        imagesrcset="/images/modern-tile-roof-640.webp 640w,
                     /images/modern-tile-roof-960.webp 960w,
                     /images/modern-tile-roof-1280.webp 1280w,
                     /images/modern-tile-roof-1600.webp 1600w"
        imagesizes="100vw">

  <!-- (Optional) Preload the hero partial you inject -->
  <link rel="preload" as="fetch" href="components/hero-section.html" crossorigin="anonymous">

  <!-- Google Fonts (non-blocking) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

  <link rel="stylesheet"
        href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap"
        media="print"
        onload="this.media='all'">
  <noscript>
    
  </noscript>

  <!-- ===== Structured data ===== -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "RoofingContractor",
    "name": "Zenith Roofing Services, Inc.",
    "image": "https://zenithroofingca.com/images/badges/logo-zenith-icon-176.webp",
    "telephone": "+1-858-900-6163",
    "areaServed": ["Escondido CA","San Diego CA","Temecula CA","North County San Diego"],
    "url": "https://zenithroofingca.com/",
    "address": { "@type": "PostalAddress", "addressRegion": "CA", "addressCountry": "US" },
    "license": "C-39 #1036112",
    "sameAs": [
      "https://www.yelp.com/biz/zenith-roofing-services-escondido",
      "https://www.angi.com/companylist/us/ca/escondido/zenith-roofing-services-inc-reviews-1.htm"
    ]
  }
  </script>

  <!-- ===== Critical CSS (tiny; stabilizes layout & scroll) ===== -->
  <style>
    body{ margin:0; font-family:-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; }
    .header{ position:relative; z-index:5000; }
    a,button,.hover-effect{ transition:all .3s ease; }
    a:hover,button:hover,.hover-effect:hover{ opacity:.9; transform:translateY(-1px); }

    :root{ --header-h:80px; }
    .sticky-nav-sentinel{ position:absolute; top:calc(var(--header-h,80px) + 1px); left:0; right:0; height:1px; }
    html { scroll-behavior:smooth; }
    [id]{ scroll-margin-top:calc(var(--header-h,80px) + 12px); }
  </style>

  <!-- ===== Load critical CSS normally (preloaded above) ===== -->
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/hero.css">

  <!-- ===== Non-critical CSS (async) ===== -->
  <link rel="stylesheet" href="/css/about.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/why-choose.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/trust.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/photo.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/testimonial.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/cta.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/service-areas.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/real-estate.css" media="print" onload="this.media='all'">
  <link rel="stylesheet" href="/css/footer.css" media="print" onload="this.media='all'"><!-- Swiper CSS (self-hosted) -->
  <link rel="stylesheet"
        href="/assets/lib/swiper/10.3.1/swiper-bundle.min.css"
        media="print" onload="this.media='all'">
  <noscript>
    
  </noscript>
</head>

<body>
  <!-- Header include FIRST so it's present for measurements -->
  <section data-include="/components/header-section.html"></section>

  <!-- Hero: LCP placeholder image (then replaced by full component via loader) -->
  <div id="hero-stub" class="zenith-hero">
    <div class="zenith-hero-media">
      <img
        id="lcp-img"
        class="zenith-hero-mobile-img"
        src="/images/modern-tile-roof-1280.webp"
        srcset="/images/modern-tile-roof-640.webp 640w,
                /images/modern-tile-roof-960.webp 960w,
                /images/modern-tile-roof-1280.webp 1280w,
                /images/modern-tile-roof-1600.webp 1600w"
        sizes="100vw"
        alt="Zenith Roofing work background"
        width="1600" height="900"
        decoding="async" fetchpriority="high">
      <div class="zenith-image-overlay" aria-hidden="true"></div>
    </div>
  </div>

  <main id="content">
    <section data-include="/components/about-section.html"></section>
    <section data-include="/components/why-choose-section.html"></section>
    <section data-include="/components/trust-section.html"></section>
    <section data-include="/components/photo-section.html"></section>
    <section data-include="/components/testimonial-section.html"></section>
    <section data-include="/components/cta-section.html"></section>
    <section data-include="/components/service-areas.html"></section>
    <section data-include="/components/real-estate.html"></section>
    <section data-include="/components/footer.html"></section>
  </main>

  <!-- ===== JS (all defer) ===== -->
  <script src="js/header.js" defer></script>
  <script src="js/hero.js" defer></script>
  <script src="js/about.js" defer></script>
  <script src="js/why-choose.js" defer></script>
  <script src="js/trust.js" defer></script>
  <script src="js/photo.js" defer></script>
  <script src="js/cta.js" defer></script>
  <script src="js/service-areas.js" defer></script>
  <script src="js/real-estate.js" defer></script>
  <script src="js/footer.js" defer></script>
  <!-- Form handler for hero estimate form -->
  <script defer src="js/estimate-form.js"></script>

  <!-- Swiper (self-hosted) + testimonials init -->
  <script defer src="/assets/lib/swiper/10.3.1/swiper-bundle.min.js"></script>
  <script defer src="js/testimonial.js"></script>

  <!-- ✅ Include loader (upgrades stub; no scroll reflow) -->
  <script>
  (function () {
    // fetch + inject a single [data-include]
    async function include(el) {
      const url = el.getAttribute('data-include');
      if (!url) return;
      try {
        const res = await fetch(url, { credentials: 'same-origin' });
        if (!res.ok) return;
        el.outerHTML = await res.text();
      } catch (e) { console.warn('include failed', url, e); }
    }

    // adjust header on sticky state
    function stickyHeader() {
      const root = document.documentElement;
      const sent = document.querySelector('.sticky-nav-sentinel') || document.createElement('div');
      sent.className = 'sticky-nav-sentinel';
      document.body.prepend(sent);
      new IntersectionObserver((entries) => {
        const e = entries[0];
        root.classList.toggle('nav-collapsed', !e.isIntersecting);
      }, { rootMargin: '-80px 0px 0px 0px' }).observe(sent); // adjust -80px if your header is taller
    }

    async function init() {
      // include everything ELSE (hero has an LCP stub now)
      const includes = Array.from(document.querySelectorAll('[data-include]'));
      await Promise.all(includes.map(include));

      // Upgrade the stub to the real hero component while REUSING the already-downloaded LCP <img>
      const stub = document.getElementById('hero-stub');
      if (stub) {
        const res = await fetch('components/hero-section.html');
        if (res.ok) {
          const html = await res.text();
          const tpl = document.createElement('template');
          tpl.innerHTML = html.trim();
          const real = tpl.content.querySelector('section.zenith-hero') || tpl.content.firstElementChild;
          if (real) {
            const lcp = document.getElementById('lcp-img');
            const realPic = real.querySelector('.zenith-hero-media picture') || real.querySelector('.zenith-hero-media');
            if (lcp && realPic) {
              const existing = realPic.querySelector('.zenith-hero-mobile-img');
              if (existing) existing.replaceWith(lcp); else realPic.appendChild(lcp);
            }
            stub.replaceWith(real);
          }
        }
      }

      stickyHeader();

      // Smooth scroll for internal links with header offset
      function scrollToHash(hash, replace) {
        const el = document.querySelector(hash);
        if (!el) return;
        el.scrollIntoView();
        if (replace) history.replaceState(null, '', hash);
      }
      document.body.addEventListener('click', function(e){
        const a = e.target.closest('a[href^="#"]');
        if (!a) return;
        const href = a.getAttribute('href');
        if (href.length > 1) {
          e.preventDefault();
          scrollToHash(href, true);
        }
      });
      window.addEventListener('load', function(){
        if(location.hash){
          setTimeout(function(){ scrollToHash(location.hash, false); }, 0);
        }
      });
    })();
  </script>
  <script src="/js/header.js" defer></script>
  <script src="/js/loader.js" defer></script>
</body>
</html>
