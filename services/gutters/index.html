<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Seamless Gutters (5" & 6") & Gutter Guards | Zenith Roofing Services</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Seamless aluminum gutters in 5-inch and 6-inch K-style with color-matched downspouts, plus premium gutter guards. Professionally installed in North County San Diego, San Diego & Temecula. Free estimates (non-real-estate)." />
  <link rel="canonical" href="https://www.zenithroofingservices.com/services/gutters/">

  <link rel="stylesheet" href="/css/header.css">
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/footer.css">
  <link rel="stylesheet" href="/css/ui.css">
  <link rel="stylesheet" href="/css/estimate-form.css">
  <script defer src="/js/loader.js"></script>
  <script defer src="/js/header.js"></script>

  <style>
    .page.gutters { max-width: 1100px; margin: 24px auto; padding: 0 16px; }
    .badge { display:inline-flex; gap:8px; align-items:center; padding:8px 12px; border-radius:999px; background:#f1f5f9; font-weight:600; font-size:.95rem; }
    .lede { color:#475569; font-size:1.075rem; margin:8px 0 18px; }
    .muted { color: var(--ui-muted, #64748b); }
    .checklist { margin:8px 0 0; padding:0 0 0 18px; }

    .error-summary { display:none; background:#fee2e2; border:1px solid #fecaca; color:#7f1d1d; border-radius:8px; padding:10px 12px; margin-bottom:12px; }
    .error-summary.show { display:block; }
    .form-group.has-error input,
    .form-group.has-error select,
    .form-group.has-error textarea { border-color:#ef4444; outline-color:#ef4444; }
    .field-error { color:#991b1b; font-size:.9rem; margin-top:6px; }
    .form-disclaimer { margin-top:10px; font-size:.9rem; color: var(--ui-muted, #64748b); }
  </style>
</head>
<body>
  <div data-include="/components/header-section.html"></div>

  <main class="page gutters" id="top">
    <section class="card airy">
      <span class="badge">Seamless Gutters</span>
      <h1 style="margin:10px 0 6px;">Seamless Aluminum Gutters (5&quot; &amp; 6&quot;) + Gutter Guards</h1>
      <p class="lede">
        Protect your home with custom, on-site formed K-style aluminum gutters. We offer
        <strong>5-inch and 6-inch</strong> sizes, color-matched downspouts, sealed mitered corners,
        and premium <strong>gutter guards</strong> to reduce clogs and maintenance.
      </p>
      <ul class="checklist muted">
        <li>Seamless K-style in 5&quot; &amp; 6&quot; (aluminum)</li>
        <li>Wide color selection; color-matched downspouts</li>
        <li>Hidden hangers, pitched for proper drainage</li>
        <li>High-flow outlets &amp; splash blocks where needed</li>
        <li>Gutter guards available (several profiles)</li>
      </ul>
    </section>

    <section id="estimate" class="card airy" data-estimate-context data-category="Gutters — Seamless 5&quot; &amp; 6&quot; + Guards" data-redirect="/thank-you/">
      <h2>Request a Free Estimate</h2>
      <p id="photos-note" class="muted" style="margin-top:-6px;">Photos are optional; all other fields are required.</p>

      <form id="estimate-form" method="POST" novalidate>
        <!-- Hidden default for this page -->
        <input type="hidden" name="service_type" value="Gutters">

        <div class="error-summary" aria-live="assertive" role="alert"></div>

        <!-- Row 1 -->
        <div class="form-row">
          <div class="form-group form-col-6">
            <label for="firstName" class="sr-only">First Name*</label>
            <input type="text" id="firstName" name="first_name" placeholder="First Name*" autocomplete="given-name" required />
          </div>
          <div class="form-group form-col-6">
            <label for="lastName" class="sr-only">Last Name*</label>
            <input type="text" id="lastName" name="last_name" placeholder="Last Name*" autocomplete="family-name" required />
          </div>
        </div>

        <!-- Row 2 -->
        <div class="form-row">
          <div class="form-group form-col-6">
            <label for="phone" class="sr-only">Phone Number*</label>
            <input type="tel" id="phone" name="phone" inputmode="tel" placeholder="Phone Number*" pattern="[0-9\s\-\(\)\.]{10,}" autocomplete="tel" required />
          </div>
          <div class="form-group form-col-6">
            <label for="email" class="sr-only">Email Address*</label>
            <input type="email" id="email" name="email" placeholder="Email Address*" autocomplete="email" required />
          </div>
        </div>

        <!-- Row 3 -->
        <div class="form-row">
          <div class="form-group">
            <label for="streetAddress" class="sr-only">Street Address*</label>
            <input type="text" id="streetAddress" name="street_address" placeholder="Street Address*" autocomplete="address-line1" required />
          </div>
        </div>

        <!-- Row 4 -->
        <div class="form-row">
          <div class="form-group form-col-4">
            <label for="city" class="sr-only">City*</label>
            <input type="text" id="city" name="city" placeholder="City*" autocomplete="address-level2" required />
          </div>
          <div class="form-group form-col-4">
            <label for="state" class="sr-only">State*</label>
            <input type="text" id="state" name="state" value="CA" placeholder="State*" readonly />
          </div>
          <div class="form-group form-col-4">
            <label for="zip" class="sr-only">ZIP Code*</label>
            <input type="text" id="zip" name="zip" placeholder="ZIP Code*" inputmode="numeric" pattern="[0-9]{5}(-[0-9]{4})?" maxlength="10" autocomplete="postal-code" required />
          </div>
        </div>

        <!-- Row 5 -->
        <div class="form-row">
          <div class="form-group form-col-4">
            <label for="photos" class="sr-only">Upload Photos</label>
            <input type="file" id="photos" name="photos" accept="image/*" multiple />
          </div>
          <div class="form-group form-col-4">
            <label for="serviceType" class="sr-only">Service Type*</label>
            <select id="serviceType" name="service_type" required>
              <option value="" disabled hidden>Service Type*</option>
              <option>Gutters</option>
              <option>Gutter Guards</option>
              <option>Roof Repair</option>
              <option>Roof Replacement</option>
              <option>Roof Maintenance</option>
              <option>Residential Roofing</option>
              <option>Commercial Roofing</option>
              <option>Other</option>
            </select>
          </div>
          <div class="form-group form-col-4">
            <label for="referral" class="sr-only">How did you hear about us?*</label>
            <select id="referral" name="referral_source" required>
              <option value="" disabled hidden>How did you hear about us?*</option>
              <option>Google</option>
              <option>Yelp</option>
              <option>Angi</option>
              <option>Social Media</option>
              <option>Referral</option>
              <option>Other</option>
            </select>
          </div>
        </div>

        <!-- Row 6 -->
        <div class="form-row">
          <div class="form-group">
            <label for="description" class="sr-only">Brief Description*</label>
            <textarea id="description" name="description" rows="4" placeholder="Brief Description* — gutter size (5&quot;/6&quot;), guards?, any overflow/clogs, lengths/sides, stories" required></textarea>
          </div>
        </div>

        <!-- reCAPTCHA -->
        <div class="form-row">
          <div class="form-group recaptcha-container">
            <div id="recaptcha-slot" aria-label="reCAPTCHA widget"></div>
          </div>
        </div>

        <div class="form-row">
          <button type="submit" class="zenith-btn">Request Free Estimate</button>
        </div>

        <p class="form-disclaimer">
          <em>*Free estimates are not available for real-estate transactions. For roof reports, visual inspections, or
          verbal estimates related to a transaction, please see our Real Estate Services. Third-party inspection requests are billed.</em>
        </p>
      </form>
    </section>

    <section class="card airy" aria-label="Service area">
      <h2>Service Area</h2>
      <p class="muted">North County San Diego, Greater San Diego, Temecula &amp; nearby communities.</p>
      <p class="muted" style="font-size:.9rem">Final scope and warranties are governed by your signed contract and manufacturer documentation.</p>
    </section>
  </main>

  <div data-include="/components/footer.html"></div>
  <div class="actionbar">
    <a class="ab-btn call" href="tel:8589006163">Call</a>
    <a class="ab-btn text" href="sms:+18589006163">Text</a>
    <a class="ab-btn estimate" href="#estimate">Free Estimate</a>
  </div>

  <script>
  (function () {
    const RECAPTCHA_SITEKEY = '6LclaJ4rAAAAAEMe8ppXrEJvIgLeFVxgmkq4DBrI';

    function ensureRecaptchaScript() {
      if (document.querySelector('script[data-zenith-recaptcha]')) return;
      const s = document.createElement('script');
      s.src = 'https://www.google.com/recaptcha/api.js?onload=recaptchaOnload&render=explicit';
      s.async = true; s.defer = true; s.setAttribute('data-zenith-recaptcha','1');
      document.head.appendChild(s);
    }
    window.recaptchaOnload = function() {
      const slot = document.getElementById('recaptcha-slot');
      if (slot && !slot.dataset.rendered && window.grecaptcha) {
        window._recaptchaWidgetId = grecaptcha.render(slot, { sitekey: RECAPTCHA_SITEKEY, theme:'light', size:'normal' });
        slot.dataset.rendered = '1';
      }
    };

    function bindPhoneMask() {
      const el = document.getElementById('phone');
      if (!el || el._masked) return;
      el._masked = true;
      el.setAttribute('maxlength', '14');
      const fmt = v => {
        const d = (v || '').replace(/\D/g, '').slice(0, 10);
        if (!d) return '';
        if (d.length < 4) return `(${d}`;
        if (d.length < 7) return `(${d.slice(0,3)}) ${d.slice(3)}`;
        return `(${d.slice(0,3)}) ${d.slice(3,6)}-${d.slice(6)}`;
      };
      el.addEventListener('input', e => { e.target.value = fmt(e.target.value); });
      el.addEventListener('blur', e => {
        const len = e.target.value.replace(/\D/g, '').length;
        e.target.setCustomValidity(len === 0 || len === 10 ? '' : 'Enter a 10-digit phone number');
      });
    }

    function bindZipToCity() {
      const zipInput  = document.getElementById('zip');
      const cityInput = document.getElementById('city');
      if (!zipInput || !cityInput || zipInput._zipBound) return;
      zipInput._zipBound = true;

      const cache = {};
      cityInput.addEventListener('input', () => { cityInput.dataset.autofilled = ''; });

      async function lookup(zip5) {
        if (cache[zip5]) return cache[zip5];
        const res = await fetch('https://api.zippopotam.us/us/' + zip5);
        if (!res.ok) throw new Error('zip lookup failed');
        const data = await res.json();
        const place = data.places && data.places[0];
        const city  = place ? place['place name'] : '';
        cache[zip5] = city;
        return city;
      }
      async function maybeFill() {
        const digits = (zipInput.value || '').replace(/\D/g, '');
        if (!(digits.length === 5 || digits.length === 9)) return;
        try {
          const city = await lookup(digits.slice(0,5));
          const canOverwrite = !cityInput.value || cityInput.dataset.autofilled === '1';
          if (canOverwrite) {
            cityInput.value = city || '';
            cityInput.dataset.autofilled = '1';
          }
        } catch {}
      }
      zipInput.addEventListener('input',  maybeFill);
      zipInput.addEventListener('change', maybeFill);
      maybeFill();
    }

    function ensureErrorSummary(form) {
      let box = form.querySelector('.error-summary');
      if (!box) {
        box = document.createElement('div');
        box.className = 'error-summary';
        box.setAttribute('role','alert');
        box.setAttribute('aria-live','assertive');
        form.prepend(box);
      }
      return box;
    }
    function clearErrors(form) {
      form.querySelectorAll('.form-group.has-error').forEach(g => g.classList.remove('has-error'));
      form.querySelectorAll('.field-error').forEach(n => n.remove());
      const box = form.querySelector('.error-summary');
      if (box) { box.textContent = ''; box.classList.remove('show'); }
    }
    function showFieldError(input, message) {
      const group = input.closest('.form-group') || input.parentElement;
      if (!group) return;
      group.classList.add('has-error');
      if (!group.querySelector('.field-error')) {
        const note = document.createElement('div');
        note.className = 'field-error';
        note.textContent = message;
        group.appendChild(note);
      }
    }
    function msgFor(input) {
      if (input.validity.valueMissing) return 'This field is required.';
      if (input.id === 'email' && input.validity.typeMismatch) return 'Enter a valid email address.';
      if (input.id === 'phone' && input.validity.patternMismatch) return 'Use format: (555) 123-4567';
      if (input.id === 'zip'   && input.validity.patternMismatch) return 'Enter a 5-digit ZIP (or ZIP+4).';
      return 'Please check this field.';
    }
    function validateForm(form) {
      clearErrors(form);
      const required = Array.from(form.querySelectorAll('[required]'));
      const invalid = required.filter(el => !el.checkValidity());
      if (invalid.length) {
        const box = ensureErrorSummary(form);
        box.textContent = 'Please fix the highlighted fields. Photos are optional; all other fields are required.';
        box.classList.add('show');
        invalid.forEach(el => showFieldError(el, msgFor(el)));
        invalid[0].focus();
        return false;
      }
      return true;
    }

    async function submitHandler(e) {
      e.preventDefault();
      const form = e.currentTarget;
      if (!validateForm(form)) return;

      // reCAPTCHA required
      let token = '';
      if (window.grecaptcha && typeof window.grecaptcha.getResponse === 'function') {
        if (typeof window._recaptchaWidgetId !== 'undefined') {
          token = window.grecaptcha.getResponse(window._recaptchaWidgetId) || '';
        }
        if (!token) {
          const t = document.querySelector('textarea[name="g-recaptcha-response"]');
          if (t && t.value) token = t.value.trim();
        }
      }
      if (!token) {
        const box = ensureErrorSummary(form);
        box.textContent = 'Please complete the reCAPTCHA before submitting.';
        box.classList.add('show');
        return;
      }

      const fd = new FormData(form);
      const data = {
        first_name: (fd.get("first_name") || "").trim(),
        last_name:  (fd.get("last_name")  || "").trim(),
        phone:      (fd.get("phone")      || "").trim(),
        email:      (fd.get("email")      || "").trim(),
        street_address: (fd.get("street_address") || "").trim(),
        city:       (fd.get("city")       || "").trim(),
        state:      (fd.get("state")      || "").trim(),
        zip:        (fd.get("zip")        || "").trim(),
        service_type:    (fd.get("service_type")    || "Gutters"),
        referral_source: (fd.get("referral_source") || ""),
        description:     ((fd.get("description") || "").trim()) + `\nPage: ${location.pathname}`
      };

      const submitBtn = form.querySelector('button[type="submit"]');
      const originalText = submitBtn ? submitBtn.textContent : null;
      if (submitBtn) { submitBtn.textContent = "Submitting…"; submitBtn.disabled = true; }

      try {
        const res = await fetch("/.netlify/functions/jn-create-lead", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(data)
        });

        const rawText = await res.text();

        if (!res.ok) {
          let msg = `Error ${res.status}${res.statusText ? ' ' + res.statusText : ''}.`;
          try {
            const j = JSON.parse(rawText);
            if (j.error || j.message) msg = `Error ${res.status}: ${j.error || j.message}`;
            if (j.details) msg += ` — ${j.details}`;
          } catch {
            if (rawText && rawText.trim()) msg = `Error ${res.status}: ${rawText.trim()}`;
          }
          const box = ensureErrorSummary(form);
          box.textContent = msg;
          box.classList.add('show');
          console.error("JobNimbus error:", rawText);
          return;
        }

        const to = (document.querySelector('[data-estimate-context]')?.dataset.redirect) || '/thank-you/';
        window.location.href = to;
      } catch (err) {
        const box = ensureErrorSummary(e.currentTarget);
        box.textContent = 'Network error. Please try again.';
        box.classList.add('show');
        console.error(err);
      } finally {
        if (submitBtn && originalText) { submitBtn.textContent = originalText; submitBtn.disabled = false; }
      }
    }

    function setupLazyRecaptcha(form) {
      const trigger = () => { ensureRecaptchaScript(); obs && obs.disconnect(); form.removeEventListener('focusin', trigger); };
      const obs = ('IntersectionObserver' in window)
        ? new IntersectionObserver((es)=>{ if (es.some(e=>e.isIntersecting)) trigger(); }, { rootMargin:'300px' })
        : null;
      if (obs) obs.observe(form);
      form.addEventListener('focusin', trigger, { once:true });
    }

    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('estimate-form');
      if (!form) return;

      bindPhoneMask();
      bindZipToCity();
      setupLazyRecaptcha(form);

      const svc = document.getElementById('serviceType');
      if (svc && !svc.value) svc.value = 'Gutters';

      form.addEventListener('submit', submitHandler);
    });
  })();
  </script>
</body>
</html>
